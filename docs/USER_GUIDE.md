# MiniGIS 用户使用指南

欢迎使用 MiniGIS！本指南将帮助您快速上手并掌握 MiniGIS 的各项功能。

## 目录

- [快速开始](#快速开始)
- [界面介绍](#界面介绍)
- [基础操作](#基础操作)
- [图层管理](#图层管理)
- [符号系统](#符号系统)
- [要素查询](#要素查询)
- [属性表](#属性表)
- [项目管理](#项目管理)
- [常见问题](#常见问题)

---

## 快速开始

### 安装运行

1. 下载最新版本的 MiniGIS 安装包
2. 运行安装程序
3. 启动 MiniGIS

### 第一个项目

1. 点击 Ribbon 菜单中的**主页** > **添加数据**
2. 选择一个 Shapefile 文件（.shp）
3. 数据将自动加载到地图视图中
4. 使用鼠标滚轮缩放，拖拽平移地图

---

## 界面介绍

### 主界面布局

```
┌─────────────────────────────────────────────────────┐
│  Ribbon 菜单栏                                       │
├──────────┬────────────────────────────┬─────────────┤
│          │                            │             │
│  图层    │      地图视图区              │  要素信息   │
│  面板    │                            │  面板       │
│          │                            │             │
├──────────┴────────────────────────────┴─────────────┤
│  属性表面板                                          │
└─────────────────────────────────────────────────────┘
```

### Ribbon 菜单

**主页选项卡**
- 新建项目
- 打开项目
- 保存
- 添加数据

**视图选项卡**
- 显示/隐藏图层面板
- 显示/隐藏属性表
- 显示/隐藏要素信息面板

### 地图工具栏

位于地图左上角：
- 🔍+ **放大** - 放大地图
- 🔍- **缩小** - 缩小地图
- ✋ **平移** - 平移模式
- 🌍 **全图** - 缩放到所有图层范围
- ⬚ **选择** - 要素选择模式
- ✕ **清除选择** - 清除当前选择
- 📏 **测量** - 测量工具（开发中）

---

## 基础操作

### 地图导航

**缩放**
- 鼠标滚轮：向上滚动放大，向下滚动缩小
- 工具栏：点击 🔍+ 或 🔍- 按钮
- 双击：双击地图放大一级

**平移**
- 按住鼠标左键拖拽地图
- 使用方向键移动地图

**缩放到全图**
- 点击工具栏的 🌍 按钮
- 自动缩放到所有图层的范围

### 要素浏览

1. 默认为浏览模式
2. 点击地图上的要素
3. 右侧面板显示要素属性信息
4. 要素会以闪烁效果高亮显示

### 要素选择

1. 点击工具栏的 ⬚ 选择按钮
2. 进入选择模式（按钮变为蓝色）
3. 点击地图上的要素进行选择
4. 选中的要素以黄色填充、红色边框高亮
5. 点击 ✕ 清除选择

---

## 图层管理

### 添加图层

**方式一：通过菜单**
1. 点击 **主页** > **添加数据**
2. 在文件对话框中选择数据文件
3. 支持的格式：.shp, .gpkg, .geojson, .kml 等

**方式二：拖放**
- 将文件直接拖放到地图区域（功能开发中）

### 图层操作

**显示/隐藏图层**
- 点击图层前的眼睛图标 👁

**调整图层顺序**
- 按住图层拖拽到目标位置
- 上方图层显示在地图顶层

**删除图层**
- 右键点击图层
- 选择 **删除**

**缩放到图层**
- 右键点击图层
- 选择 **缩放至图层**
- 地图自动缩放到图层范围

### 图层样式

**调整透明度**
- 在图层面板中拖动透明度滑块
- 范围：0%（完全透明）- 100%（不透明）

**符号设置**
- 右键点击图层
- 选择 **符号设置**
- 详见 [符号系统](#符号系统)

---

## 符号系统

### 点符号

**基本设置**
- **形状**：圆形、方形、三角形、星形等
- **大小**：1-50 像素
- **颜色**：RGB 颜色选择器
- **透明度**：0-100%
- **旋转**：0-360 度

**示例**
```
形状：圆形
大小：10px
颜色：#FF0000（红色）
透明度：80%
```

### 线符号

**基本设置**
- **颜色**：线条颜色
- **宽度**：1-20 像素
- **虚线样式**：实线、虚线、点划线等
- **端点样式**：方形、圆形、平头
- **连接样式**：尖角、圆角、斜角

**示例**
```
颜色：#0000FF（蓝色）
宽度：2px
样式：实线
端点：圆形
```

### 面符号

**基本设置**
- **填充颜色**：多边形内部颜色
- **填充透明度**：0-100%
- **边框颜色**：边界线颜色
- **边框宽度**：0-10 像素
- **边框透明度**：0-100%

**示例**
```
填充颜色：#00FF00（绿色）
填充透明度：50%
边框颜色：#000000（黑色）
边框宽度：1px
```

### 符号编辑

1. 右键点击图层 > **符号设置**
2. 在符号编辑器中调整参数
3. 实时预览效果
4. 点击 **应用** 保存更改

---

## 要素查询

### 空间查询

**点击查询**
1. 在浏览模式下点击要素
2. 右侧面板显示属性信息
3. 支持查看所有属性字段

**选择查询**
1. 切换到选择模式
2. 点击要素进行选择
3. 在属性表中查看详细信息

### 属性查询

1. 打开属性表
2. 使用搜索框输入关键词
3. 表格自动过滤匹配项
4. 支持模糊搜索

---

## 属性表

### 打开属性表

**方式一：右键菜单**
- 右键点击图层
- 选择 **打开属性表**

**方式二：底部面板**
- 点击界面底部的属性表标签
- 选择要查看的图层

### 表格操作

**排序**
- 点击列标题进行排序
- 再次点击切换升序/降序

**搜索**
- 在搜索框中输入关键词
- 自动过滤匹配的记录

**导出**
- 点击 **导出** 按钮
- 选择导出格式（CSV、Excel等）

**刷新**
- 点击 **刷新** 按钮
- 重新加载数据

### 定位要素

**双击定位**
1. 在属性表中双击某一行
2. 地图自动缩放到该要素
3. 要素以黄色高亮显示

**从地图选择**
1. 在选择模式下点击要素
2. 属性表自动滚动到对应行
3. 该行高亮显示

---

## 项目管理

### 新建项目

1. 点击 **主页** > **新建项目**
2. 输入项目名称
3. 自动创建空白项目

### 打开项目

1. 点击 **主页** > **打开项目**
2. 选择项目文件（.minigis）
3. 自动加载图层和配置

### 保存项目

**手动保存**
- 点击 **主页** > **保存**
- 保存当前项目状态

**自动保存**
- 图层变化后自动保存
- 延迟 2 秒避免频繁写入
- 下次启动自动恢复

### 会话恢复

**自动恢复**
- 应用启动时自动检测上次会话
- 恢复地图位置、缩放级别
- 恢复所有图层（如果文件仍存在）
- 显示恢复结果通知

**文件检查**
- 自动检查图层文件是否存在
- 缺失的文件会被自动移除
- 显示恢复成功的图层数量

---

## 常见问题

### Q: 支持哪些数据格式？

**矢量数据**
- Shapefile (.shp)
- GeoPackage (.gpkg)
- GeoJSON (.geojson, .json)
- KML/KMZ (.kml, .kmz)
- MapInfo (.tab)
- GML (.gml)

**栅格数据**（开发中）
- GeoTIFF (.tif, .tiff)
- JPEG2000 (.jp2)

### Q: 中文属性显示乱码怎么办？

MiniGIS 自动处理 GBK 编码的 Shapefile：
1. 优先使用 GBK 编码打开
2. 失败则尝试 UTF-8 编码
3. 通常无需手动处理

如果仍有问题：
- 检查源文件编码
- 使用 QGIS 转换为 UTF-8 编码

### Q: 坐标系显示不正确？

MiniGIS 自动转换所有数据到 WGS84（EPSG:4326）：
- 无需手动设置坐标系
- 支持大部分常用坐标系
- 包括 CGCS2000、UTM 等

### Q: 图层加载很慢？

**优化建议**
- 简化数据（减少要素数量）
- 使用更高效的格式（GeoPackage）
- 创建空间索引

### Q: 如何测量距离和面积？

测量工具正在开发中，敬请期待。

临时方案：
- 使用 QGIS 等专业软件测量
- 导出数据后在其他工具中分析

### Q: 可以编辑数据吗？

当前版本仅支持查看和分析，编辑功能计划中。

### Q: 支持三维显示吗？

三维地图支持在长期规划中。

### Q: 如何报告问题？

1. 通过 GitHub Issues 提交
2. 提供详细的问题描述
3. 附加截图或日志文件

---

## 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + N` | 新建项目 |
| `Ctrl + O` | 打开项目 |
| `Ctrl + S` | 保存项目 |
| `Ctrl + D` | 添加数据 |
| `+` | 放大 |
| `-` | 缩小 |
| `Home` | 缩放到全图 |
| `Esc` | 取消选择 |
| `Space` | 切换平移模式 |
| `S` | 切换选择模式 |

---

## 技术支持

如需帮助，请访问：
- 项目主页：https://github.com/yourusername/MiniGIS
- 问题反馈：https://github.com/yourusername/MiniGIS/issues
- 开发文档：docs/DEVELOPMENT.md

---

**MiniGIS** - 让 GIS 更简单、更强大！
