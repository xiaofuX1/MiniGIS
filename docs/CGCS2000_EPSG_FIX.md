# CGCS2000 EPSG代码映射修复报告

## 修复时间
2025年10月16日

## 问题描述
项目中CGCS2000坐标系的EPSG代码映射完全错误，导致坐标系选择和投影转换出现严重问题。

## 错误的映射（修复前）

| 类型 | 范围 | 错误的EPSG | 正确的EPSG |
|------|------|-----------|-----------|
| 3度带（带号）zone 25-45 | 75°E-135°E | 4491-4511 | **4513-4533** |
| 3度带（中央经线）CM 75E-135E | 75°E-135°E | 4513-4533 | **4534-4554** |
| 6度带（带号）zone 13-23 | 75°E-135°E | 4502-4523 | **4491-4501** |
| 6度带（中央经线）CM 75E-135E | 75°E-135°E | 4546-4556 | **4502-4512** |

## 正确的CGCS2000 EPSG映射

### 1. 地理坐标系
- **EPSG:4490** - CGCS2000 地理坐标系

### 2. 6度带投影坐标系（带号版本）zone 13-23
- **EPSG:4491** - zone 13, CM 75°E
- **EPSG:4492** - zone 14, CM 81°E
- **EPSG:4493** - zone 15, CM 87°E
- **EPSG:4494** - zone 16, CM 93°E
- **EPSG:4495** - zone 17, CM 99°E
- **EPSG:4496** - zone 18, CM 105°E
- **EPSG:4497** - zone 19, CM 111°E
- **EPSG:4498** - zone 20, CM 117°E
- **EPSG:4499** - zone 21, CM 123°E
- **EPSG:4500** - zone 22, CM 129°E
- **EPSG:4501** - zone 23, CM 135°E

### 3. 6度带投影坐标系（中央经线版本）CM 75E-135E
- **EPSG:4502** - CM 75°E
- **EPSG:4503** - CM 81°E
- **EPSG:4504** - CM 87°E
- **EPSG:4505** - CM 93°E
- **EPSG:4506** - CM 99°E
- **EPSG:4507** - CM 105°E
- **EPSG:4508** - CM 111°E
- **EPSG:4509** - CM 117°E
- **EPSG:4510** - CM 123°E
- **EPSG:4511** - CM 129°E
- **EPSG:4512** - CM 135°E

### 4. 3度带投影坐标系（带号版本）zone 25-45
- **EPSG:4513** - zone 25, CM 75°E
- **EPSG:4514** - zone 26, CM 78°E
- **EPSG:4515** - zone 27, CM 81°E
- ... (每3度递增)
- **EPSG:4533** - zone 45, CM 135°E

### 5. 3度带投影坐标系（中央经线版本）CM 75E-135E
- **EPSG:4534** - CM 75°E
- **EPSG:4535** - CM 78°E
- **EPSG:4536** - CM 81°E
- ... (每3度递增)
- **EPSG:4554** - CM 135°E

## 修复的文件

1. **src/stores/cgcs2000Data.ts**
   - 修复3度带zone版本：EPSG起始码从4491改为4513
   - 修复3度带CM版本：EPSG起始码从4513改为4534
   - 修复6度带zone版本：EPSG起始码计算公式
   - 修复6度带CM版本：EPSG起始码从4546改为4502

2. **src/components/Panels/CRSPanel.tsx**
   - 修复3度带zone过滤范围：4491-4511 → 4513-4533
   - 修复3度带CM过滤范围：4513-4533 → 4534-4554
   - 修复6度带zone过滤范围：4534-4545 → 4491-4501
   - 修复6度带CM过滤范围：4546-4556 → 4502-4512

3. **src/components/Dialogs/CRSDialog.tsx**
   - 修复3度带zone过滤范围：4491-4511 → 4513-4533
   - 修复3度带CM过滤范围：4513-4534 → 4534-4554

4. **src/stores/crsStore.ts**
   - 删除包含错误EPSG映射的LEGACY_CGCS2000_CRS_LIST数据
   - 保持使用从cgcs2000Data.ts导入的正确数据

## 数据来源
- EPSG官方数据库：https://epsg.io/
- CSDN参考文档：https://blog.csdn.net/qq_42679415/article/details/132401878

## 计算公式

### 6度带
- 带号范围：13-23
- 中央经线计算：CM = 75 + (zone - 13) × 6
- EPSG代码（带号）：4491 + (zone - 13)
- EPSG代码（CM）：4502 + index (0-10)

### 3度带
- 带号范围：25-45
- 中央经线计算：CM = 75 + (zone - 25) × 3
- EPSG代码（带号）：4513 + (zone - 25)
- EPSG代码（CM）：4534 + index (0-20)

## 影响范围
此修复影响所有使用CGCS2000坐标系的功能：
- 坐标系选择器
- 图层投影转换
- 坐标显示
- 数据导入导出

## 测试建议
1. 测试各个CGCS2000坐标系的选择和切换
2. 验证投影转换的准确性
3. 检查坐标显示是否正确
4. 确认数据导入导出功能正常
